{% extends 'base.html.twig' %}

{% block styles %}
    {{ parent() }}
    <link rel="stylesheet" href="/static/css/home.css">
    <link rel="stylesheet" href="/static/css/clock.css">
    <link rel="stylesheet" href="/static/css/no_connect.css">

{% endblock %}

{% block body %}

<main>
  <section>
    <img src="/static/img/logo.png" alt="Synapt Technologies Logo">
    <h1 style="margin-bottom: 20px;" class="clock">
      <span id="clock"></span>
      <span class="bg">88:88:88</span>
    </h1>
    <a><i><b>{{ cur_url_short }}</b></i> failed to load.</a>
    <a>Reloading in <b id="countdown">30</b></a>
  </section>
</main>



<script>
  clock = document.getElementById("clock");

  function leadingZero(num) {
    if (num < 10) {
      return "0" + num;
    }
    return num;
  }

  function updateClock() {
    date = new Date();
    clock.innerHTML = leadingZero(date.getHours()) + ":" + leadingZero(date.getMinutes()) + ":" + leadingZero(date.getSeconds());
  }
  setInterval(updateClock, 100);
  
</script>

<script>

  const countdownLength = 30;

  const countdownSpan = document.getElementById("countdown");

  var timeleft = countdownLength;
  for (var i = 0; i < countdownLength; i++) {
    setTimeout(function () {
      countdownSpan.innerHTML = leadingZero(timeleft);
      timeleft -= 1;
    }, i * 1000);
  }



  setTimeout(function () {
    countdownSpan.innerHTML = "now...";
  }, countdownLength * 1000);

</script>


{% endblock %}

